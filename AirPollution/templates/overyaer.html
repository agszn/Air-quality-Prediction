{% extends "base.html" %}
{% block title %}
{% endblock %}

{% block style %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        h1, h2 {
            text-align: center;
        }
        table {
            width: 80%;
            margin: 0 auto;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        canvas {
            display: block;
            margin: 20px auto;
            border: 1px solid #ddd;
        }
    </style>
{% endblock %}

{% block index %}
{% endblock %}

{% block content %}
    <h1>Air Pollution in India by District (2017-2023)</h1>
    <canvas id="districtChart" width="800" height="400"></canvas>

    <h2>Air Quality Index (2017-2023)</h2>
    <table>
        <thead>
            <tr>
                <th>Year</th>
                <th>New Delhi</th>
                <th>Mumbai</th>
                <th>Bengaluru</th>
                <th>Chennai</th>
                <th>Kolkata</th>
                <th>Hyderabad</th>
                <th>Pune</th>
                <th>Ahmedabad</th>
                <th>Jaipur</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>2017 - AQI</td>
                <td>200 - AQI</td>
                <td>180 - AQI</td>
                <td>220 - AQI</td>
                <td>190 - AQI</td>
                <td>210 - AQI</td>
                <td>195 - AQI</td>
                <td>205 - AQI</td>
                <td>190 - AQI</td>
                <td>180 - AQI</td>
            </tr>
            <tr>
                <td>2018</td>
                <td>180</td>
                <td>200</td>
                <td>210</td>
                <td>195</td>
                <td>205</td>
                <td>190</td>
                <td>200</td>
                <td>185</td>
                <td>175</td>
            </tr>
            <tr>
                <td>2019</td>
                <td>220</td>
                <td>210</td>
                <td>230</td>
                <td>200</td>
                <td>215</td>
                <td>200</td>
                <td>210</td>
                <td>200</td>
                <td>190</td>
            </tr>
            <tr>
                <td>2020</td>
                <td>190</td>
                <td>190</td>
                <td>215</td>
                <td>185</td>
                <td>200</td>
                <td>185</td>
                <td>195</td>
                <td>185</td>
                <td>180</td>
            </tr>
            <tr>
                <td>2021</td>
                <td>210</td>
                <td>200</td>
                <td>225</td>
                <td>190</td>
                <td>205</td>
                <td>195</td>
                <td>205</td>
                <td>195</td>
                <td>185</td>
            </tr>
            <tr>
                <td>2022</td>
                <td>195</td>
                <td>185</td>
                <td>220</td>
                <td>180</td>
                <td>200</td>
                <td>190</td>
                <td>200</td>
                <td>190</td>
                <td>180</td>
            </tr>
            <tr>
                <td>2023</td>
                <td>205</td>
                <td>195</td>
                <td>225</td>
                <td>185</td>
                <td>210</td>
                <td>195</td>
                <td>210</td>
                <td>200</td>
                <td>190</td>
            </tr>
        </tbody>
    </table>

    <script>
        // Sample data (replace this with actual data)
        const districts = ['New Delhi', 'Mumbai', 'Bengaluru', 'Chennai', 'Kolkata', 'Hyderabad', 'Pune', 'Ahmedabad', 'Jaipur'];
        const years = ['2017', '2018', '2019', '2020', '2021', '2022', '2023'];
        const pollutionData = [
            [200, 180, 220, 190, 210, 195, 205], // New Delhi
            [180, 200, 210, 190, 200, 185, 195], // Mumbai
            [220, 210, 230, 215, 225, 220, 225], // Bengaluru
            [190, 195, 200, 185, 190, 180, 185], // Chennai
            [210, 205, 215, 200, 205, 200, 210], // Kolkata
            [195, 190, 200, 185, 195, 190, 195], // Hyderabad
            [205, 200, 210, 195, 205, 200, 210], // Pune
            [190, 185, 200, 185, 195, 190, 195], // Ahmedabad
            [180, 175, 190, 180, 185, 180, 190]  // Jaipur
        ];

        // Create a dataset for each district
        const datasets = [];
        for (let i = 0; i < districts.length; i++) {
            datasets.push({
                label: districts[i],
                data: pollutionData[i],
                fill: false,
                borderColor: getRandomColor(),
                tension: 0.4
            });
        }

        // Create the chart
        const ctx = document.getElementById('districtChart').getContext('2d');
        const districtChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: years,
                datasets: datasets
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Function to generate random colors
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
    </script>

{% endblock %}
